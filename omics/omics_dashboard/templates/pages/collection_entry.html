{% extends 'pages/file_entry.html' %}
{% from 'components/file_label_column_editor.html' import file_label_column_editor, file_label_column_editor_script with context %}
{% from 'components/macros.html' import list_table, download_dropdown with context %}
{% block headline %}
  {{ super() }}
  <br>
  <div class="btn-group">
    <button class="btn btn-secondary" onclick="copyCollection()"><i class="fas fa-copy"></i> Copy</button>
    {{ download_dropdown(page_data.download_url) }}
  </div>
{% endblock %}
{% block content %}
  {{ super() }}
  {{ file_label_column_editor(page_data.label_column_table_data) }}
  {{ list_table(page_data.analysis_table_data) }}
  {{ list_table(page_data.child_table_data) }}
{% endblock %}
{% block scripts %}
  {{ super() }}
  {{ file_label_column_editor_script(page_data.update_url) }}
  <script>
    function copyCollection() {
        fetch('{{ url_for('collections_api.copy_collection', collection_id=page_data.id) }}')
            .then(res => res.json())
            .then(data => window.location = `{{ url_for('collections.render_collection_list') }}${data.id}`)
    }
  </script>
{% endblock %}