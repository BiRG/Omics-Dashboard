{# A list of things #}
{% extends "base.html" %}
{% block content %}
  <div class="page-header">
  <h2 class="display-4">
    {{ type }}
  </h2>
  </div>
  <div class="container-fluid">
    <table id="entries" class="table table-striped table-bordered" cellspacing="0" width="auto">
      <thead>
          <tr>
          {% for heading in headings.values() %}
            <th>{{ heading }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for item in data %}
          <tr>
          {% for key in headings.keys() %}
            <td>
            {% if key == 'name' %}
              <a href="{{ get_item_link(type, item) }}">{{ item[key] }}</a>
            {% elif key in USERKEYS %}
              <a href="{{ get_profile_link(item[key]) }}">{{ get_user_name(item[key]) }}</a>
            {% elif key=='dateModified' %}
              {{ datetime.utcfromtimestamp(int(item[key])).strftime('%Y-%m-%dT%H:%M:%SZ') }}
            {% elif key == 'admin' %}
              <i class="{{ 'fas fa-check-square-o' if int(item[key]) else 'fas fa-square-o' }}"></i><p hidden>{{ item[key] }}</p>
            {% elif key == 'options' and type.toLower() == 'jobs' %}
              <div class="btn-group" role="group" aria-label="controls">
                <button class="btn btn-primary job-play-button" id="{{ item['id'] }}">
                  <i class="{{ 'fas fa-play' if item['status']=='Paused' else ('fas fa-pause' if item['status']=='Running' else '') }}" aria-hidden="true"></i>
                </button>
                <button class="btn btn-danger job-cancel-button" id="{{ item['id'] }}">
                  <i class="" aria-hidden="true"></i>
                </button>
              </div>
            {% else %}
              {{ item[key] }}
            {% endif %}
            </td>
          {% endfor %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
{% block scripts %}
  {{ super() }}
  <script type="text/javascript">
    $(document).ready(function() {
        $('#entries').DataTable({'order': [[0, 'desc']]});
    });
  </script>
{% endblock %}
